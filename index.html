<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        html {
            box-sizing: border-box;
            height: 100%;
            max-height: 100%;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body, #map_canvas {
            margin: 0;
            height: inherit;
            max-height: inherit;
        }

        .gm-style .gm-style-iw {
            text-align: center;
        }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script src="jquery.ui.map.js"></script>
</head>
<body>
    <div id="map_canvas"></div>
    <script>
    $('#map_canvas').gmap().bind('init', function() { 
        $.getJSON( 'data.json', function(data) { 
            $.each( data.profiles, function(i, marker) {
                $('#map_canvas').gmap('addMarker', { 
                    'position': new google.maps.LatLng(marker.latitude, marker.longitude), 
                    'bounds': true 
                }).click(function() {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': '<img src="' + marker.avatar + '" height="100"/><br/><h1>' + marker.name + '</h1>'
                    }, this);
                });
            });
        });
    });
    </script>
</body>
</html>